<form [formGroup]="cinemaForm" novalidate (ngSubmit)="onSubmit()">
  <mat-card class="card">
    <mat-card-header>
      <mat-card-title>Create cinema</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="row">
        <div class="col">
          <mat-form-field class="full-width">
            <input matInput placeholder="Name" formControlName="name">
            <mat-error *ngIf="cinemaForm.get('name')?.hasError('required')">
              Cinema name is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <mat-form-field class="full-width">
            <mat-select placeholder="City" formControlName="city">
              <mat-option *ngFor="let city of cities" [value]="city.id">
                {{ city.name }}
              </mat-option>
              <div>
                <button mat-button (click)="openCreateCityDialog()">
                  +Create new city
                </button>
              </div>
            </mat-select>
            <mat-error *ngIf="cinemaForm.get('city')?.hasError('required')">
              City is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <mat-form-field class="full-width">
            <textarea matInput placeholder="Address" formControlName="address"></textarea>
            <mat-error *ngIf="cinemaForm.get('address')?.hasError('required')">
              Address is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!--      <div class="row">-->
      <!--        <div class="col">-->
      <!--          <mat-form-field class="full-width">-->
      <!--            <input matInput placeholder="Count of halls" formControlName="hallCount">-->
      <!--            <mat-error *ngIf="cinemaForm.get('hallCount')?.hasError('required')">-->
      <!--              Halls count need to be <strong>one or more</strong>-->
      <!--            </mat-error>-->
      <!--            <mat-error *ngIf="cinemaForm.get('hallCount')?.getError('pattern')">-->
      <!--              Only nonnegative numbers is allowed-->
      <!--            </mat-error>-->
      <!--          </mat-form-field>-->
      <!--        </div>-->
      <!--      </div>-->

      <!--      <div *ngIf="cinemaForm.get('hallCount')?.value > 0" class="row">-->
      <!--        <div *ngFor="let hall of counter(cinemaForm.get('hallCount')?.value)" class="col">-->
      <!--          <mat-form-field class="full-width">-->
      <!--            <button mat-button type="button" (click)="createHall()">-->
      <!--              + Add hall-->
      <!--            </button>-->
      <!--          </mat-form-field>-->
      <!--        </div>-->
      <!--      </div>-->

      <div class="row">
        <div class="col">
          <h2>Current hall count: {{ hallCounter }}</h2>
        </div>
      </div>

      <div class="row">
        <button mat-icon-button (click)="onAdd()">
          <mat-icon>add</mat-icon>
          Add new hall
        </button>
        <mat-nav-list>
          <mat-list-item *ngFor="let hall of halls; let i = index" role="listitem">
            <span matLine>{{ hall.name ? hall.name : 'Empty hall' }}</span>
            <button mat-icon-button (click)="createHall(i)">
              <mat-icon>add</mat-icon>
            </button>
            <button mat-icon-button (click)="editHall(i)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button (click)="deleteHall(i)">
              <mat-icon>delete</mat-icon>
            </button>
          </mat-list-item>
        </mat-nav-list>
      </div>

    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button type="submit">Create</button>
    </mat-card-actions>
  </mat-card>
</form>
